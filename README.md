# æŠ–éŸ³ MCP Server

ä¸€ä¸ªåŸºäºæŠ–éŸ³çš„è§†é¢‘è§£æä¸ä¸‹è½½å·¥å…·ã€‚æ”¯æŒ Model Context Protocol (MCP) æ ‡å‡†ï¼Œæä¾›æŠ–éŸ³è§†é¢‘é“¾æ¥è§£æã€æ— æ°´å°è§†é¢‘ä¸‹è½½åŠŸèƒ½ï¼Œé€‚åˆè‡ªç”¨æˆ–è‡ªåŠ¨åŒ–å·¥å…·é›†æˆã€‚

## åŠŸèƒ½äº®ç‚¹

* ğŸ” **æŠ–éŸ³é“¾æ¥æ™ºèƒ½è§£æ**ï¼šè‡ªåŠ¨è¯†åˆ«åˆ†äº«é“¾æ¥ï¼Œæå–æ— æ°´å°è§†é¢‘åœ°å€
* ğŸ“¥ **ä¸€é”®ä¸‹è½½è§†é¢‘**ï¼šç›´æ¥ä¸‹è½½æ— æ°´å°è§†é¢‘æ–‡ä»¶åˆ°æœ¬åœ°
* ğŸ“Š **å®æ—¶è¿›åº¦æ˜¾ç¤º**ï¼šæ§åˆ¶å°æ˜¾ç¤ºä¸‹è½½è¿›åº¦ï¼Œæ¸…æ™°äº†è§£ä¸‹è½½çŠ¶æ€
* ğŸ—‘ï¸ **è‡ªåŠ¨æ–‡ä»¶ç®¡ç†**ï¼šæ–‡ä»¶ä¿å­˜åœ¨æŒ‡å®šå·¥ä½œç›®å½•ï¼Œä¾¿äºç®¡ç†

> æ¯ä¸ªå·¥å…·éƒ½ä¼šè¿”å›å®é™…ä¿å­˜çš„æ–‡ä»¶åå’Œè§†é¢‘ä¿¡æ¯ï¼Œæ–¹ä¾¿ä½ é›†æˆåˆ°ä»»ä½•è‡ªåŠ¨åŒ–æµç¨‹ï¼

## å®‰è£…ä½¿ç”¨

### NPX æ–¹å¼ï¼ˆæ¨èï¼‰

```bash
pnpx @yc-w-cn/douyin-mcp-server
```

### å…¨å±€å®‰è£…

```bash
pnpm install -g @yc-w-cn/douyin-mcp-server
douyin-mcp-server
```

## é…ç½®è¦æ±‚

### ç¯å¢ƒå˜é‡

åœ¨ä½¿ç”¨å‰ï¼Œå¯ä»¥è®¾ç½®å·¥ä½œç›®å½•ç¯å¢ƒå˜é‡ï¼ˆå¯é€‰ï¼‰ï¼š

```bash
# å¯é€‰ï¼šè‡ªå®šä¹‰å·¥ä½œç›®å½•
export WORK_DIR="/path/to/your/data/directory"
```

æˆ–è€…ä½¿ç”¨é»˜è®¤å·¥ä½œç›®å½• `.data`ï¼ˆæ— éœ€è®¾ç½®ç¯å¢ƒå˜é‡ï¼‰

## MCP å®¢æˆ·ç«¯é…ç½®

### Claude Desktop é…ç½®

åœ¨ Claude Desktop çš„é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ï¼š

```json
{
  "mcpServers": {
    "douyin-mcp-server": {
      "command": "npx",
      "args": ["-y", "@yc-w-cn/douyin-mcp-server@latest"],
      "env": {
        "WORK_DIR": "/path/to/your/data/directory"
      }
    }
  }
}
```

é…ç½®æ–‡ä»¶ä½ç½®ï¼š
- **macOS**: `~/Library/Application Support/Claude/claude_desktop_config.json`
- **Windows**: `%APPDATA%\Claude\claude_desktop_config.json`

### å…¶ä»– MCP å®¢æˆ·ç«¯

å¯¹äºå…¶ä»–æ”¯æŒ MCP çš„å®¢æˆ·ç«¯ï¼Œè¯·å‚è€ƒå…¶æ–‡æ¡£é…ç½® stdio ä¼ è¾“æ–¹å¼ã€‚

## å¯ç”¨å·¥å…·ä¸å‚æ•°

æ¯ä¸ªå·¥å…·å¤„ç†åéƒ½ä¼šè¿”å›è§†é¢‘ä¿¡æ¯å’Œä¿å­˜çš„æ–‡ä»¶åï¼Œä¾¿äºåç»­è¿½è¸ªæˆ–ä¸‹è½½ã€‚

### 1. è·å–æ— æ°´å°ä¸‹è½½é“¾æ¥

* **å·¥å…·å**: `get_douyin_download_link`
* **å‚æ•°**:
  * `share_link`ï¼šæŠ–éŸ³åˆ†äº«é“¾æ¥æˆ–åŒ…å«é“¾æ¥çš„æ–‡æœ¬

### 2. ä¸‹è½½è§†é¢‘æ–‡ä»¶

* **å·¥å…·å**: `download_douyin_video`
* **å‚æ•°**:
  * `share_link`ï¼šæŠ–éŸ³åˆ†äº«é“¾æ¥æˆ–åŒ…å«é“¾æ¥çš„æ–‡æœ¬

### 3. è§£æè§†é¢‘ä¿¡æ¯

* **å·¥å…·å**: `parse_douyin_video_info`
* **å‚æ•°**:
  * `share_link`ï¼šæŠ–éŸ³åˆ†äº«é“¾æ¥æˆ–åŒ…å«é“¾æ¥çš„æ–‡æœ¬

## æ–‡ä»¶è¾“å‡ºè§„èŒƒ

æ‰€æœ‰ç”Ÿæˆæ–‡ä»¶å‡ä¿å­˜è‡³å·¥ä½œç›®å½•ï¼Œæ–‡ä»¶åè§„åˆ™å¦‚ä¸‹ï¼š

* `{videoId}.mp4` - ä¸‹è½½çš„è§†é¢‘æ–‡ä»¶
* ï¼ˆä½ å¯ä»¥ç”¨å·¥å…·è¿”å›å€¼ç›´æ¥è·å–è¿™äº›æ–‡ä»¶åï¼‰

## ä½¿ç”¨æµç¨‹ç¤ºä¾‹

1. **è·å–ä¸‹è½½é“¾æ¥**
   ä½¿ç”¨ `get_douyin_download_link` å·¥å…·è·å–æ— æ°´å°è§†é¢‘é“¾æ¥
2. **ä¸‹è½½è§†é¢‘æ–‡ä»¶**
   ç”¨ `download_douyin_video` å·¥å…·ç›´æ¥ä¸‹è½½è§†é¢‘æ–‡ä»¶
3. **æŸ¥çœ‹è§†é¢‘ä¿¡æ¯**
   ç”¨ `parse_douyin_video_info` å·¥å…·æŸ¥çœ‹è§†é¢‘åŸºæœ¬ä¿¡æ¯

## å¼€å‘æŒ‡å—

### æœ¬åœ°å¼€å‘

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/yc-w-cn/douyin-mcp-server.git
cd douyin-mcp-server

# å®‰è£…ä¾èµ–
pnpm install

# å¼€å‘æ¨¡å¼è¿è¡Œ
pnpm run dev

# æ„å»º
pnpm run build

# è¿è¡Œæ„å»ºç‰ˆæœ¬
pnpm start
```

### é¡¹ç›®ç»“æ„

```
douyin-mcp-server/
â”œâ”€â”€ src/                  # æºä»£ç ç›®å½•
â”‚   â”œâ”€â”€ config/           # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ services/         # æœåŠ¡å±‚
â”‚   â”œâ”€â”€ tools/            # å·¥å…·å®šä¹‰
â”‚   â””â”€â”€ utils/            # å·¥å…·å‡½æ•°
â”œâ”€â”€ dist/                 # ç¼–è¯‘è¾“å‡ºç›®å½•
â”œâ”€â”€ package.json          # é¡¹ç›®é…ç½®
â”œâ”€â”€ tsconfig.json         # TypeScript é…ç½®
â”œâ”€â”€ README.md             # é¡¹ç›®è¯´æ˜
â””â”€â”€ .data/                # é»˜è®¤å·¥ä½œç›®å½•
    â””â”€â”€ {videoId}.mp4     # ä¸‹è½½çš„è§†é¢‘æ–‡ä»¶
```

### è‡ªå®šä¹‰æ‰©å±•

æ‚¨å¯ä»¥æ ¹æ®éœ€è¦æ‰©å±•ä»¥ä¸‹åŠŸèƒ½ï¼š

1. **æ‰¹é‡å¤„ç†**ï¼šæ”¯æŒæ‰¹é‡å¤„ç†å¤šä¸ªæŠ–éŸ³é“¾æ¥
2. **è§†é¢‘æ ¼å¼è½¬æ¢**ï¼šæ”¯æŒè½¬æ¢ä¸ºå…¶ä»–è§†é¢‘æ ¼å¼
3. **éŸ³é¢‘æå–**ï¼šä»è§†é¢‘ä¸­æå–éŸ³é¢‘æ–‡ä»¶
4. **ç¼“å­˜æœºåˆ¶**ï¼šæ·»åŠ æ™ºèƒ½ç¼“å­˜ä»¥æé«˜æ€§èƒ½

## æŠ€æœ¯æ ˆ

- **Node.js** >= 18.0.0
- **TypeScript** - ç±»å‹å®‰å…¨çš„JavaScript
- **Model Context Protocol** - æ ‡å‡†åŒ–çš„AIä¸Šä¸‹æ–‡åè®®
- **Axios** - HTTP è¯·æ±‚åº“
- **Zod** - æ•°æ®éªŒè¯åº“

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **è§†é¢‘ä¸‹è½½å¤±è´¥**
   ```
   é”™è¯¯ï¼šä¸‹è½½å¤±è´¥: Request failed with status code 404
   è§£å†³ï¼šæ£€æŸ¥æŠ–éŸ³é“¾æ¥æ˜¯å¦æ­£ç¡®ï¼Œç¡®ä¿ç½‘ç»œè¿æ¥æ­£å¸¸
   ```

2. **å·¥ä½œç›®å½•æƒé™é—®é¢˜**
   ```
   é”™è¯¯ï¼šEACCES: permission denied
   è§£å†³ï¼šç¡®ä¿å·¥ä½œç›®å½•æœ‰å†™å…¥æƒé™ï¼Œæˆ–è®¾ç½® WORK_DIR åˆ°æœ‰æƒé™çš„ç›®å½•
   ```

3. **é“¾æ¥è§£æå¤±è´¥**
   ```
   é”™è¯¯ï¼šæœªæ‰¾åˆ°æœ‰æ•ˆçš„åˆ†äº«é“¾æ¥
   è§£å†³ï¼šæ£€æŸ¥åˆ†äº«é“¾æ¥æ ¼å¼æ˜¯å¦æ­£ç¡®ï¼Œç¡®ä¿é“¾æ¥æœªè¿‡æœŸ
   ```

### æ—¥å¿—è°ƒè¯•

å¯ç”¨è¯¦ç»†æ—¥å¿—ï¼š
```bash
DEBUG=douyin-mcp-server pnpx @yc-w-cn/douyin-mcp-server
```

## è´¡çŒ®æŒ‡å—

æ¬¢è¿è´¡çŒ®ä»£ç ï¼è¯·éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š

1. Fork æœ¬é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ï¼š`git checkout -b feature/amazing-feature`
3. æäº¤æ›´æ”¹ï¼š`git commit -m 'Add amazing feature'`
4. æ¨é€åˆ†æ”¯ï¼š`git push origin feature/amazing-feature`
5. åˆ›å»º Pull Request

### å¼€å‘è§„èŒƒ

- ä½¿ç”¨ TypeScript è¿›è¡Œç±»å‹å®‰å…¨å¼€å‘
- éµå¾ª ESLint ä»£ç è§„èŒƒ
- æ·»åŠ é€‚å½“çš„é”™è¯¯å¤„ç†
- ç¼–å†™æ¸…æ™°çš„æ³¨é‡Šå’Œæ–‡æ¡£

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚è¯¦æƒ…è¯·è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

## ä½œè€…ä¿¡æ¯

- **ä½œè€…**: Yuchen Wang
- **é‚®ç®±**: contact@wangyuchen.cn
- **GitHub**: [https://github.com/yc-w-cn](https://github.com/yc-w-cn)

## æ›´æ–°æ—¥å¿—

### v1.0.0 (2025-01-15)

- âœ¨ åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- ğŸ” æ”¯æŒæŠ–éŸ³é“¾æ¥è§£æ
- ğŸ“¥ æ”¯æŒæ— æ°´å°è§†é¢‘ä¸‹è½½
- ğŸ“Š æ”¯æŒå®æ—¶ä¸‹è½½è¿›åº¦æ˜¾ç¤º
- ï¿½ æ”¯æŒè§†é¢‘ä¿¡æ¯è·å–

## ç›¸å…³é“¾æ¥

- [Model Context Protocol](https://modelcontextprotocol.io/)
- [æŠ–éŸ³å®˜ç½‘](https://www.douyin.com/)
- [Claude Desktop](https://claude.ai/download)

## æ”¯æŒ

å¦‚æœæ‚¨è§‰å¾—è¿™ä¸ªé¡¹ç›®æœ‰ç”¨ï¼Œè¯·ç»™å®ƒä¸€ä¸ª â­ï¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š

- ğŸ“§ é‚®ç®±ï¼šcontact@wangyuchen.cn
- ğŸ› GitHub Issuesï¼š[é¡¹ç›®é—®é¢˜è¿½è¸ª](https://github.com/yc-w-cn/douyin-mcp-server/issues)
- ğŸ’¬ GitHub Discussionsï¼š[é¡¹ç›®è®¨è®ºåŒº](https://github.com/yc-w-cn/douyin-mcp-server/discussions)